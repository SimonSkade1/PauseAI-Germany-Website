<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PauseAI Leaderboard</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <div>
                <h1>üèÜ PauseAI Leaderboard</h1>
                <div class="nav-links">
                    <a href="/tree">Skill Tree ‚Üí</a>
                </div>
            </div>
        </div>
        
        <div class="leaderboard">
            <div class="leaderboard-header">
                <span>Rang</span>
                <span>Name</span>
                <span>Rolle</span>
                <span style="text-align: right">XP</span>
            </div>
            <div id="leaderboard-body">
                <div class="loading">Lade Daten...</div>
            </div>
        </div>
    </div>

    <script>
        const roleClasses = {
            "Besorgter B√ºrger": "role-1",
            "Aktivist": "role-2",
            "Besch√ºtzer der Menschheit": "role-3"
        };

        async function loadLeaderboard() {
            const container = document.getElementById("leaderboard-body");
            
            try {
                const response = await fetch("/api/leaderboard");
                const data = await response.json();
                
                if (data.length === 0) {
                    container.innerHTML = '<div class="empty">Noch keine Eintr√§ge</div>';
                    return;
                }
                
                container.innerHTML = data.map((user, index) => {
                    const rank = index + 1;
                    const rankClass = rank <= 3 ? `rank-${rank}` : "";
                    const medal = rank === 1 ? "ü•á " : rank === 2 ? "ü•à " : rank === 3 ? "ü•â " : "";
                    
                    return `
                        <div class="leaderboard-row">
                            <span class="rank ${rankClass}">${medal}${rank}</span>
                            <span class="name">${user.discord_name}</span>
                            <span class="role ${roleClasses[user.role]}">${user.role}</span>
                            <span class="xp">${user.total_xp} XP</span>
                        </div>
                    `;
                }).join("");
                
            } catch (error) {
                container.innerHTML = '<div class="empty">Fehler beim Laden</div>';
                console.error(error);
            }
        }
        
        loadLeaderboard();
    </script>
</body>
</html>
